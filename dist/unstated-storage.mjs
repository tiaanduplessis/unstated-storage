import t from"set-immediate-shim";import{Container as e}from"unstated";var r=function(t){if(void 0===t)return!1;try{return t.setItem("storage",""),t.getItem("storage"),t.removeItem("storage"),!0}catch(t){return!1}},o=function(e){function o(){var o=this;e.call(this);t(function(){var t=o.store,e=t.key,s=t.version,n=t.storage;if(!r(n))throw new Error("unstated-storage: Invalid storage provided");if(!e||"string"!=typeof e)throw new Error("unstated-storage: Invalid key provided");var i={_version:s},a=n.getItem(e);null!==a?(a=JSON.parse(a),o.setState(s&&a._version?a._version===s?a:i:a)):o.setState(i),o.subscribe(function(){n.setItem(e,JSON.stringify(o.state))})})}return e&&(o.__proto__=e),(o.prototype=Object.create(e&&e.prototype)).constructor=o,o}(e);export{o as StoredContainer};
//# sourceMappingURL=unstated-storage.mjs.map
