!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("set-immediate-shim"),require("unstated")):"function"==typeof define&&define.amd?define(["exports","set-immediate-shim","unstated"],t):t(e.unstatedStorage={},e.setImmediate,e.unstated)}(this,function(e,t,r){t=t&&t.hasOwnProperty("default")?t.default:t;var o=function(e){if(void 0===e)return!1;try{return e.setItem("storage",""),e.getItem("storage"),e.removeItem("storage"),!0}catch(e){return!1}};e.StoredContainer=function(e){function r(){var r=this;e.call(this);t(function(){var e=r.store,t=e.key,n=e.version,i=e.storage;if(!o(i))throw new Error("unstated-storage: Invalid storage provided");if(!t||"string"!=typeof t)throw new Error("unstated-storage: Invalid key provided");var s={_version:n},a=i.getItem(t);null!==a?(a=JSON.parse(a),r.setState(n&&a._version?a._version===n?a:s:a)):r.setState(s),r.subscribe(function(){i.setItem(t,JSON.stringify(r.state))})})}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(r.Container)});
//# sourceMappingURL=unstated-storage.umd.js.map
